% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/writeSWBMInputs.R
\name{create_SWBM_landcover_df}
\alias{create_SWBM_landcover_df}
\title{Create SWBM Landcover Data Frame}
\usage{
create_SWBM_landcover_df(
  scenario_id = "basecase",
  start_date,
  end_date,
  poly_df,
  landcover_df,
  alfalfa_grain_rotate_years = 8
)
}
\arguments{
\item{scenario_id}{Character. Scenario identifier; one of \code{"basecase"}, \code{"nv_gw_mix"}, or \code{"nv_all"} (case-insensitive).
\itemize{
\item \code{"basecase"}: start from each polygon's default SWBM_LU code and apply an
alfalfa to grain rotation on alfalfa-coded fields every \code{alfalfa_grain_rotate_years}.
\item \code{"nv_all"}: replace \emph{all} irrigated landcover codes with the native vegetation code.
\item \code{"nv_gw_mix"}: replace codes with native vegetation \emph{only} on fields whose
water source is groundwater (2), mixed (3), or unknown (999).
}}

\item{start_date}{Date. Model start date (first stress period).}

\item{end_date}{Date. Model end date (last stress period).}

\item{alfalfa_grain_rotate_years}{Integer. Rotation interval in years for alfalfa fields. Default: \code{8}.}

\item{polygon_table_file}{Character. Path to the polygon table file. Must contain at least
columns \code{SWBM_id}, \code{SWBM_LU}, and \code{WATERSOURC}.
Default: \code{file.path(data_dir["time_indep_dir","loc"], "polygons_table.txt")}.}

\item{landcover_desc_file}{Character. Path to the landcover description file. Must contain
columns \code{id} and \code{Landcover_Name}.
Default: \code{file.path(data_dir["time_indep_dir","loc"], "landcover_table.txt")}.}
}
\value{
A \code{data.frame} with columns
\itemize{
\item \code{Stress_Period} (Date or month-start Date)
\item \code{ID_<SWBM_id>} (integer codes) for each field
}
representing the landcover code at each stress period.
}
\description{
Builds a stress-period-by-field landcover assignment table for the Soil Water Budget Model (SWBM),
according to a chosen land-use scenario.
}
\details{
\enumerate{
\item Validates \code{scenario_id} against \code{c("basecase","nv_gw_mix","nv_all")}.
\item Reads the polygon table (\code{polygon_table_file}) and landcover descriptions
(\code{landcover_desc_file}). Warns if \code{SWBM_id} values are duplicated or missing.
\item Calls \code{swbm_build_field_value_df(nfields, start_date, end_date)} to create a
wide table with one column per field (named \code{ID_<SWBM_id>}) and a
\code{Stress_Period} column.
\item Scenario logic:
\itemize{
\item \strong{basecase}:
\itemize{
\item Start with each field's baseline \code{SWBM_LU} from \code{polygon_table_file}.
\item For fields with \code{SWBM_LU == 1} (alfalfa), apply an 8-year (by default)
alfalfa to grain rotation.  Field 1 rotates in years 1,9,...; field 2 in years 2,10,... etc.
}
\item \strong{nv_all}:
\itemize{
\item Identify all \code{Landcover_Name}s matching \code{"Irrigated"} and replace their codes
with the native vegetation code.
}
\item \strong{nv_gw_mix}:
\itemize{
\item For fields whose water source is groundwater (2), mixed (3), or unknown (999),
set their landcover code to the native vegetation code for the entire period
(Unknown water source fields are automatically assumed to be GW in SWBM).
}
}
}
}
\examples{
\dontrun{
df1 <- create_SWBM_landcover_df(
  scenario_id         = "basecase",
  output_dir          = "outputs",
  start_date          = as.Date("1991-01-01"),
  end_date            = as.Date("1991-12-31"),
  alfalfa_grain_rotate_years = 8
)

df2 <- create_SWBM_landcover_df(
  "nv_all", "outputs",
  as.Date("2000-01-01"), as.Date("2000-12-31")
)

df3 <- create_SWBM_landcover_df(
  "nv_gw_mix", "/tmp",
  as.Date("2005-01-01"), as.Date("2005-12-31")
)
}
}
